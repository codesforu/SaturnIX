<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" >
 <head>
    <script type="text/javascript">var _starttime = new Date().getTime();</script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PR_AcceptRead</title>
</head>

<body>
          <div class="pageTitle">
            <h1 id="title">PR_AcceptRead</h1>
      </div>
    				
      <div id="page-update" class="pageStatus  hastoc">
 			   			</div>

<p>Accepts a new connection and receives a block of data.
</p>
<div id="section_1"><h3 class="editable"> Syntax </h3>
<pre class="eval">#include &lt;prio.h&gt; 

PRInt32 PR_AcceptRead(
  PRFileDesc *listenSock, 
  PRFileDesc **acceptedSock,
  PRNetAddr **peerAddr, 
  void *buf, 
  PRInt32 amount, 
  PRIntervalTime timeout);
</pre>
</div><div id="section_2"><h3 class="editable"> Parameters </h3>
<p>The function has the following parameters:
</p>
<dl><dt><code>listenSock</code>
</dt><dd>A pointer to a <code>PRFileDesc</code> object representing a socket descriptor that has been called with the <code><a href="PR_Listen.html">PR_Listen</a></code> function, also known as the rendezvous socket.
</dd><dt><code>acceptedSock</code>
</dt><dd>A pointer to a pointer to a <code>PRFileDesc</code> object. On return, <code>*acceptedSock</code> points to the <code>PRFileDesc</code> object for the newly connected socket. This parameter is valid only if the function return does not indicate failure.
</dd><dt><code>peerAddr</code>
</dt><dd>A pointer a pointer to a <code>PRNetAddr</code> object. On return, <code>peerAddr</code> points to the address of the remote socket. The <code>PRNetAddr</code> object that <code>peerAddr</code> points to will be in the buffer pointed to by <code>buf</code>. This parameter is valid only if the function return does not indicate failure.
</dd><dt><code>buf</code>
</dt><dd>A pointer to a buffer to hold data sent by the peer and the peer's address. This buffer must be large enough to receive <code>amount</code> bytes of data and two <code>PRNetAddr</code> structures (thus allowing the runtime to align the addresses as needed).
</dd><dt><code>amount</code>
</dt><dd>The number of bytes of data to receive. Does not include the size of the <code>PRNetAddr</code> structures. If 0, no data will be read from the peer.
</dd><dt><code>timeout</code>
</dt><dd>The timeout interval only applies to the read portion of the operation. <code>PR_AcceptRead</code> blocks indefinitely until the connection is accepted; the read will time out after the timeout interval elapses.
</dd></dl>
</div><div id="section_3"><h3 class="editable"> Returns </h3>
<ul><li> A positive number indicates the number of bytes read from the peer.
</li><li> The value -1 indicates a failure. The reason for the failure can be obtained by calling <code><a href="PR_GetError.html">PR_GetError</a></code>.
</li></ul>
</div><div id="section_4"><h3 class="editable"> Description </h3>
<p><code>PR_AcceptRead</code> accepts a new connection and retrieves the newly created socket's descriptor and the connecting peer's address. Also, as its name suggests, <code>PR_AcceptRead</code> receives the first block of data sent by the peer.
</p></div><hr />
</body>
</html>
