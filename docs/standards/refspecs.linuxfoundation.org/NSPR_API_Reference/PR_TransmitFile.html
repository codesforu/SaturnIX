<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" >
 <head>
    <script type="text/javascript">var _starttime = new Date().getTime();</script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PR_TransmitFile</title>
</head>

<body>
          <div class="pageTitle">
            <h1 id="title">PR_TransmitFile</h1>
      </div>
    				
      <div id="page-update" class="pageStatus  hastoc">
 			   			</div>

<p>Sends a complete file across a connected socket.
</p>
<div id="section_1"><h3 class="editable"> Syntax </h3>
<pre class="eval">#include &lt;prio.h&gt; 

PRInt32 PR_TransmitFile(
  PRFileDesc *networkSocket, 
  PRFileDesc *sourceFile,
  const void *headers, 
  PRInt32 hlen, 
  PRTransmitFileFlags flags,
  PRIntervalTime timeout);
</pre>
</div><div id="section_2"><h3 class="editable"> Parameters </h3>
<p>The function has the following parameters:
</p>
<dl><dt><code>networkSocket</code>
</dt><dd>A pointer to a <code>PRFileDesc</code> object representing the connected socket to send data over.
</dd><dt><code>sourceFile</code>
</dt><dd>A pointer to a <code>PRFileDesc</code> object representing the file to send.
</dd><dt><code>headers</code>
</dt><dd>A pointer to the buffer holding the headers to be sent before sending data.
</dd><dt><code>hlen</code>
</dt><dd>Length of the <code>headers</code> buffer in bytes.
</dd><dt><code>flags</code>
</dt><dd>One of the following flags:
</dd></dl>
<ul><li> <code>PR_TRANSMITFILE_KEEP_OPEN</code> indicates that the socket will be kept open after the data is sent.
</li><li> <code>PR_TRANSMITFILE_CLOSE_SOCKET</code> indicates that the connection should be closed immediately after successful transfer of the file.
</li></ul>
<dl><dt><code>timeout</code>
</dt><dd>Time limit for completion of the transmit operation.
</dd></dl>
</div><div id="section_3"><h3 class="editable"> Returns </h3>
<ul><li> A positive number indicates the number of bytes successfully written, including both the headers and the file.
</li><li> The value -1 indicates a failure. If an error occurs while sending the file, the <code>PR_TRANSMITFILE_CLOSE_SOCKET</code> flag is ignored. The reason for the failure can be obtained by calling <code><a href="PR_GetError.html">PR_GetError</a></code>.
</li></ul>
</div><div id="section_4"><h3 class="editable"> Description </h3>
<p>The <code>PR_TransmitFile</code> function sends a complete file (<code>sourceFile</code>) across a connected socket 
(<code>networkSocket</code>). If <code>headers</code> is non-<code>NULL</code>,
<code>PR_TransmitFile</code> sends the headers across the socket before sending the file.
</p><p>The enumeration <code>PRTransmitFileFlags</code>, used in the <code>flags</code> parameter, is defined as follows:
</p>
<pre class="eval">typedef enum PRTransmitFileFlags {
  PR_TRANSMITFILE_KEEP_OPEN = 0,
  PR_TRANSMITFILE_CLOSE_SOCKET = 1
} PRTransmitFileFlags;
</pre></div><hr />
</body>
</html>
