<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>sockio</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Linux Standard Base Core Specification, Generic Part"
HREF="book1.html"><LINK
REL="UP"
TITLE="Interface Definitions for libc"
HREF="libcman.html"><LINK
REL="PREVIOUS"
TITLE="ioctl"
HREF="baselib-ioctl-2.html"><LINK
REL="NEXT"
TITLE="ttyio"
HREF="baselib-ttyio-2.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux Standard Base Core Specification, Generic Part</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="baselib-ioctl-2.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="baselib-ttyio-2.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="BASELIB-SOCKIO-2"
></A
>sockio</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN17261"
></A
><H2
>Name</H2
>sockio&nbsp;--&nbsp;socket ioctl commands</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN17264"
></A
><H2
>Synopsis</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN17267"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>#include &#60;sys/ioctl.h&#62;
#include &#60;sys/socket.h&#62;
#include &#60;net/if.h&#62;
#include &#60;netinet/in.h&#62;</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>int 
  <TT
CLASS="FUNCTION"
>ioctl</TT
></CODE
>(int 
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>sockfd</I
></TT
></I
></TT
>, int 
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>request</I
></TT
></I
></TT
>, void *
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>argp</I
></TT
></I
></TT
>);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN17281"
></A
><H2
>Description</H2
><P
>Socket <TT
CLASS="FUNCTION"
>ioctl()</TT
> commands are a subset of the 
<TT
CLASS="FUNCTION"
>ioctl()</TT
> calls, which can perform a variety of 
functions on sockets. <TT
CLASS="PARAMETER"
><I
>sockfd</I
></TT
> shall be an
open file descriptor referring to a socket (see the
<TT
CLASS="FUNCTION"
>socket()</TT
> or <TT
CLASS="FUNCTION"
>accept()</TT
> functions).</P
><P
>Socket <TT
CLASS="FUNCTION"
>ioctl()</TT
> commands apply to the underlying 
network interfaces, and affect the entire system, not just the file 
descriptor used to issue the <TT
CLASS="FUNCTION"
>ioctl()</TT
>.</P
><P
>The following values for <TT
CLASS="PARAMETER"
><I
>request</I
></TT
>
are accepted:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFCONF</TT
> (Deprecated)</DT
><DD
><P
>Get the interface configuration list for the system.
<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Note: </B
>The <TT
CLASS="SYMBOL"
>SIOCGIFCONF</TT
> interface is
superceded by the 
<TT
CLASS="FUNCTION"
>if_nameindex()</TT
> family of functions (see
<A
HREF="normativerefs.html#STD.SUSV4"
>POSIX 1003.1-2008 (ISO/IEC 9945-2009)</A
>).
A future version of this specification may withdraw this value
for <TT
CLASS="PARAMETER"
><I
>request</I
></TT
>.</P
></BLOCKQUOTE
></DIV
>
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a
<TT
CLASS="STRUCTNAME"
>ifconf</TT
> structure, as described in
<TT
CLASS="FILENAME"
>&#60;net/if.h&#62;</TT
>. Before calling, the caller 
shall set the
<CODE
CLASS="STRUCTFIELD"
>ifc_ifcu.ifcu_req</CODE
> field 
to point to an array of <TT
CLASS="STRUCTNAME"
>ifreq</TT
> structures, and 
set <CODE
CLASS="STRUCTFIELD"
>ifc_len</CODE
> to the size in bytes of this allocated 
array. Upon return, <CODE
CLASS="STRUCTFIELD"
>ifc_len</CODE
> 
will contain the size in bytes of the array which was actually used.
If it is the same as the length upon calling, the caller 
should assume that the array was too small and try again with a 
larger array.</P
><P
>On success, <TT
CLASS="SYMBOL"
>SIOCGIFCONF</TT
> shall return a nonnegative value.
<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Rationale: </B
>Historical UNIX systems disagree on the meaning of the return value.</P
></BLOCKQUOTE
></DIV
></P
></DD
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFFLAGS</TT
></DT
><DD
><P
>Get the interface flags for the indicated interface.
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a 
<TT
CLASS="STRUCTNAME"
>ifreq</TT
> structure. Before calling, the 
caller should fill in the <CODE
CLASS="STRUCTFIELD"
>ifr_name</CODE
> 
field with the interface name, and upon return, the 
<CODE
CLASS="STRUCTFIELD"
>ifr_ifru.ifru_flags</CODE
> field is set 
with the interface flags.</P
></DD
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFADDR</TT
></DT
><DD
><P
>Get the interface address for the given interface.
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a
<TT
CLASS="STRUCTNAME"
>ifreq</TT
> structure. Before calling, the 
caller should fill in the <CODE
CLASS="STRUCTFIELD"
>ifr_name</CODE
> 
field with the interface name, and upon return, the 
<CODE
CLASS="STRUCTFIELD"
>ifr_ifru.ifru_addr</CODE
> field is set 
with the interface address.</P
></DD
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFBRDADDR</TT
></DT
><DD
><P
>Get the interface broadcast address for the given interface.
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a
<TT
CLASS="STRUCTNAME"
>ifreq</TT
> structure. Before calling, the 
caller should fill in the <CODE
CLASS="STRUCTFIELD"
>ifr_name</CODE
> 
field with the interface name, and upon return, the 
<CODE
CLASS="STRUCTFIELD"
>ifr_ifru.ifru_broadcast</CODE
> field is set 
with the interface broadcast address.</P
></DD
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFDSTADDR</TT
></DT
><DD
><P
>Get the point-to-point address for the given interface.
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a
<TT
CLASS="STRUCTNAME"
>ifreq</TT
> structure. Before calling, the 
caller should fill in the <CODE
CLASS="STRUCTFIELD"
>ifr_name</CODE
> 
field with the interface name, and upon return, the 
<CODE
CLASS="STRUCTFIELD"
>ifr_dstaddr</CODE
> field is set 
with the point-to-point address.</P
></DD
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFNAME</TT
></DT
><DD
><P
>Get the name of an interface.
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a 
<TT
CLASS="STRUCTNAME"
>ifreq</TT
> structure. Before calling, the 
caller should fill in the <CODE
CLASS="STRUCTFIELD"
>ifr_ifindex</CODE
> 
field with the number (index) of the interface, and upon return, the 
<CODE
CLASS="STRUCTFIELD"
>ifr_name</CODE
> field is set 
with the interface name.</P
></DD
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFNETMASK</TT
></DT
><DD
><P
>Get the network mask for the given interface. 
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a
<TT
CLASS="STRUCTNAME"
>ifreq</TT
> structure. Before calling, the 
caller should fill in the <CODE
CLASS="STRUCTFIELD"
>ifr_name</CODE
> 
field with the interface name, and upon return, the 
<CODE
CLASS="STRUCTFIELD"
>ifr_ifru.ifru_netmask</CODE
> field is set 
with the network mask.</P
></DD
><DT
><TT
CLASS="SYMBOL"
>SIOCGIFMTU</TT
></DT
><DD
><P
>Get the Maximum Transmission Unit (MTU) size for the given interface. 
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to a
<TT
CLASS="STRUCTNAME"
>ifreq</TT
> structure. Before calling, the 
caller should fill in the <CODE
CLASS="STRUCTFIELD"
>ifr_name</CODE
> 
field with the interface name, and upon return, the 
<CODE
CLASS="STRUCTFIELD"
>ifr_ifru.ifru_mtu</CODE
> field is set 
with the MTU.
Note: The range of valid values for MTU varies for an interface
depending on the interface type.</P
></DD
><DT
><TT
CLASS="SYMBOL"
>FIONREAD</TT
></DT
><DD
><P
>Get the amount of queued unread data in the receive buffer.
<TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> shall point to an integer where the result is to be placed.
<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Note: </B
>Some implementations may also support the use of <TT
CLASS="SYMBOL"
>FIONREAD</TT
>
on other types of file descriptor. However, the LSB only specifies its behavior for a socket
related file descriptor.</P
></BLOCKQUOTE
></DIV
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN17392"
></A
><H2
>Return Value</H2
><P
>On success, if <TT
CLASS="PARAMETER"
><I
>request</I
></TT
> is
<SPAN
CLASS="TOKEN"
>SIOCGIFCONF</SPAN
>, a non-negative integer shall be returned.
If request is not <SPAN
CLASS="TOKEN"
>SIOCGIFCONF</SPAN
>, on success 
<SPAN
CLASS="RETURNVALUE"
>0</SPAN
> is returned. 
On error, <SPAN
CLASS="RETURNVALUE"
>-1</SPAN
> is returned and
the global variable <CODE
CLASS="VARNAME"
>errno</CODE
> is set appropriately.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN17401"
></A
><H2
>Errors</H2
><P
></P
><TABLE
CLASS="VARIABLELIST"
BORDER="0"
CELLSPACING="1"
CELLPADDING="1"
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN17404"
></A
><SPAN
STYLE="white-space: nowrap"
>EBADF</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="PARAMETER"
><I
>sockfd</I
></TT
> is not a valid descriptor.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN17409"
></A
><SPAN
STYLE="white-space: nowrap"
>EFAULT</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="PARAMETER"
><I
>argp</I
></TT
> references an inaccessible memory area.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN17414"
></A
><SPAN
STYLE="white-space: nowrap"
>ENOTTY</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The specified <TT
CLASS="PARAMETER"
><I
>request</I
></TT
> does not apply to the kind of 
object that the descriptor <TT
CLASS="PARAMETER"
><I
>sockfd</I
></TT
> references.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN17420"
></A
><SPAN
STYLE="white-space: nowrap"
>EINVAL</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Either <TT
CLASS="PARAMETER"
><I
>request</I
></TT
> or <TT
CLASS="PARAMETER"
><I
>argp</I
></TT
>
is invalid.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN17426"
></A
><SPAN
STYLE="white-space: nowrap"
>ENOTCONN</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The operation is only defined on a connected socket, but the socket wasn't
connected.</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="baselib-ioctl-2.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="baselib-ttyio-2.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>ioctl</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libcman.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>ttyio</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>