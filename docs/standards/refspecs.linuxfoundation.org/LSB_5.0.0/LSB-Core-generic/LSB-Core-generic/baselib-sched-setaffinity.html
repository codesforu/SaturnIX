<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>sched_setaffinity</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Linux Standard Base Core Specification, Generic Part"
HREF="book1.html"><LINK
REL="UP"
TITLE="Interface Definitions for libc"
HREF="libcman.html"><LINK
REL="PREVIOUS"
TITLE="sched_getaffinity"
HREF="baselib-sched-getaffinity.html"><LINK
REL="NEXT"
TITLE="sched_setscheduler"
HREF="baselib-sched-setscheduler.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux Standard Base Core Specification, Generic Part</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="baselib-sched-getaffinity.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="baselib-sched-setscheduler.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="BASELIB-SCHED-SETAFFINITY"
></A
>sched_setaffinity</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN18958"
></A
><H2
>Name</H2
>sched_setaffinity&nbsp;--&nbsp;set the CPU affinity mask for a process</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN18961"
></A
><H2
>Synopsis</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN18964"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>#include &#60;sched.h&#62;</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>int <TT
CLASS="FUNCTION"
>sched_setaffinity</TT
></CODE
>(pid_t
  <TT
CLASS="PARAMETER"
><I
>pid</I
></TT
>, unsigned int
  <TT
CLASS="PARAMETER"
><I
>cpusetsize</I
></TT
>, cpu_set_t *
  <TT
CLASS="PARAMETER"
><I
>mask</I
></TT
>);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN18975"
></A
><H2
>Description</H2
><P
><TT
CLASS="FUNCTION"
>sched_setaffinity()</TT
>
shall set the CPU affinity mask for a process. </P
><P
>The parameter <TT
CLASS="PARAMETER"
><I
>pid</I
></TT
>
specifies the ID for the process. 
If <TT
CLASS="PARAMETER"
><I
>pid</I
></TT
> is 0,
then the calling process is specified instead.</P
><P
>The parameter <TT
CLASS="PARAMETER"
><I
>cpusetsize</I
></TT
> specifies 
the length of the data pointed to by
<TT
CLASS="PARAMETER"
><I
>mask</I
></TT
>, in bytes.  
Normally, this parameter is specified as
<TT
CLASS="LITERAL"
>sizeof(cpu_set_t)</TT
>.</P
><P
>The parameter <TT
CLASS="PARAMETER"
><I
>mask</I
></TT
>
specifies the new value for the CPU affinity mask. 
The structure pointed to by <TT
CLASS="PARAMETER"
><I
>mask</I
></TT
>
represents the set of CPUs on which the process may run.
If <TT
CLASS="PARAMETER"
><I
>mask</I
></TT
> does not specify one of the CPUs 
on which the specified process is currently running, 
then <TT
CLASS="FUNCTION"
>sched_setaffinity()</TT
>
shall migrate the process to one of those CPUs.</P
><P
>Setting the mask on a multiprocessor system can improve performance.
For example, 
setting the mask for one process to specify a particular CPU,
and then setting the mask of all other processes to exclude the CPU,
dedicates the CPU to the process
so that the process runs as fast as possible.
This technique also prevents loss of performance in case the process
terminates on one CPU and starts again on another, invalidating cache.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN18992"
></A
><H2
>Return Value</H2
><P
>On success, <TT
CLASS="FUNCTION"
>sched_setaffinity()</TT
>
shall return <TT
CLASS="LITERAL"
>0</TT
>.</P
><P
>On failure, <TT
CLASS="FUNCTION"
>sched_setaffinity()</TT
>
shall return <TT
CLASS="LITERAL"
>-1</TT
> and 
set <CODE
CLASS="VARNAME"
>errno</CODE
> as follows.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN19001"
></A
><H2
>Errors</H2
><P
></P
><TABLE
CLASS="VARIABLELIST"
BORDER="0"
CELLSPACING="1"
CELLPADDING="1"
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN19004"
></A
><SPAN
STYLE="white-space: nowrap"
>EFAULT</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Bad address.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN19008"
></A
><SPAN
STYLE="white-space: nowrap"
>EINVAL</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="PARAMETER"
><I
>mask</I
></TT
> does not specify any processors that exist in the system, 
or <TT
CLASS="PARAMETER"
><I
>cpusetsize</I
></TT
> is smaller than the kernel's affinity mask. </P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN19014"
></A
><SPAN
STYLE="white-space: nowrap"
>EPERM</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Insufficient privileges.
The effective user ID of the process calling
<TT
CLASS="FUNCTION"
>sched_setaffinity()</TT
>
is not equal to the user ID or effective user ID of the specified process,
and the calling process does not have appropriate privileges.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN19019"
></A
><SPAN
STYLE="white-space: nowrap"
>ESRCH</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The specified process could not be found.</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN19023"
></A
><H2
>See Also</H2
><P
><TT
CLASS="FUNCTION"
>sched_setscheduler()</TT
>, <TT
CLASS="FUNCTION"
>sched_getaffinity()</TT
>.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="baselib-sched-getaffinity.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="baselib-sched-setscheduler.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>sched_getaffinity</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libcman.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>sched_setscheduler</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>