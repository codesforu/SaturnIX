<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>getopt</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Linux Standard Base Core Specification, Generic Part"
HREF="book1.html"><LINK
REL="UP"
TITLE="Interface Definitions for libc"
HREF="libcman.html"><LINK
REL="PREVIOUS"
TITLE="getloadavg"
HREF="baselib-getloadavg-3.html"><LINK
REL="NEXT"
TITLE="getopt_long"
HREF="baselib-getopt-long-3.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux Standard Base Core Specification, Generic Part</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="baselib-getloadavg-3.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="baselib-getopt-long-3.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="LIBUTIL-GETOPT-3"
></A
>getopt</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN15331"
></A
><H2
>Name</H2
>getopt&nbsp;--&nbsp;parse command line options</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN15336"
></A
><H2
>Synopsis</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN15339"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>#include &#60;unistd.h&#62;</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>int 
  <TT
CLASS="FUNCTION"
>getopt</TT
></CODE
>(int 
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>argc</I
></TT
></I
></TT
>, char * const 
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>argv</I
></TT
>[]</I
></TT
>, const char *
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>optstring</I
></TT
></I
></TT
>);</CODE
></P
><P
></P
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SYNOPSIS"
>extern char <CODE
CLASS="VARNAME"
>*optarg</CODE
>;
extern int <CODE
CLASS="VARNAME"
>optind</CODE
>, <CODE
CLASS="VARNAME"
>opterr</CODE
>, <CODE
CLASS="VARNAME"
>optopt</CODE
>;</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN15358"
></A
><H2
>Description</H2
><P
>The <TT
CLASS="FUNCTION"
>getopt()</TT
> function shall parse command line arguments
as described in <A
HREF="normativerefs.html#STD.SUSV4"
>POSIX 1003.1-2008 (ISO/IEC 9945-2009)</A
>, with the following exceptions,
where LSB and POSIX specifications vary.
LSB systems shall
implement the modified behaviors described below.</P
><DIV
CLASS="REFSECT2"
><A
NAME="AEN15365"
></A
><H3
>Argument Ordering</H3
><P
>The <TT
CLASS="FUNCTION"
>getopt()</TT
> function can process command line arguments
referenced by <TT
CLASS="PARAMETER"
><I
>argv</I
></TT
> in one of three ways:
<P
></P
><TABLE
CLASS="VARIABLELIST"
BORDER="0"
CELLSPACING="1"
CELLPADDING="1"
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN15371"
></A
><SPAN
STYLE="white-space: nowrap"
>PERMUTE</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>the order of arguments in
<TT
CLASS="PARAMETER"
><I
>argv</I
></TT
> is altered so that all options (and
their arguments) are moved in front of all of the operands.
This is the default behavior.
<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Note: </B
>This behavior has undefined results if 
<TT
CLASS="PARAMETER"
><I
>argv</I
></TT
> is not modifiable. This is to support
historic behavior predating the use of <SPAN
CLASS="TOKEN"
>const</SPAN
> and
<A
HREF="normativerefs.html#STD.ISOC99"
>ISO C (1999)</A
>. The function prototype was aligned
with <A
HREF="normativerefs.html#STD.SUSV4"
>POSIX 1003.1-2008 (ISO/IEC 9945-2009)</A
> despite the fact that it modifies
<TT
CLASS="PARAMETER"
><I
>argv</I
></TT
>, 
and the library maintainers are unwilling to change this.</P
></BLOCKQUOTE
></DIV
></P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN15383"
></A
><SPAN
STYLE="white-space: nowrap"
>REQUIRE_ORDER</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The arguments in
<TT
CLASS="PARAMETER"
><I
>argv</I
></TT
> are processed in exactly the order
given, and option processing stops when the first non-option argument
is reached, or when the element of argv is "--". This ordering
can be enforced either by setting the environment variable
<CODE
CLASS="VARNAME"
>POSIXLY_CORRECT</CODE
>, or by setting the first character
of <TT
CLASS="PARAMETER"
><I
>optstring</I
></TT
> to '+'.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN15390"
></A
><SPAN
STYLE="white-space: nowrap"
>RETURN_IN_ORDER</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The order of arguments
is not altered, and all arguments are processed. Non-option arguments
(operands) are handled as if they were the argument to an option with
the value 1 ('\001'). This ordering is selected by setting the first
character of <TT
CLASS="PARAMETER"
><I
>optstring</I
></TT
> to '-';</P
></TD
></TR
></TBODY
></TABLE
></P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN15395"
></A
><H3
>Option Characteristics</H3
><P
><I
CLASS="EMPHASIS"
>LSB</I
> specifies that:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>an element of <TT
CLASS="PARAMETER"
><I
>argv</I
></TT
> that starts with 
"<SPAN
CLASS="TOKEN"
>-</SPAN
>" (and is not exactly "<SPAN
CLASS="TOKEN"
>-</SPAN
>" or 
"<SPAN
CLASS="TOKEN"
>--</SPAN
>") is an option element.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>characters of an option element, aside from the initial 
"<SPAN
CLASS="TOKEN"
>-</SPAN
>", are option characters.</P
></LI
></UL
></P
><P
><I
CLASS="EMPHASIS"
>POSIX</I
> specifies that:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>applications using <TT
CLASS="FUNCTION"
>getopt()</TT
> shall obey the following 
syntax guidelines:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>option name is a single alphanumeric character from the portable character set</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>option is preceded by the '<SPAN
CLASS="TOKEN"
>-</SPAN
>' delimiter character</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>options without option-arguments should be accepted when grouped behind 
one '<SPAN
CLASS="TOKEN"
>-</SPAN
>' delimiter</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>each option and option-argument is a separate argument</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>option-arguments are not optional</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>all options should precede operands on the command line</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>the argument "<SPAN
CLASS="TOKEN"
>--</SPAN
>" is accepted as a delimiter 
indicating the end of options and the consideration of subsequent 
arguments, if any, as operands</P
></LI
></UL
></P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>historical implementations of <TT
CLASS="FUNCTION"
>getopt()</TT
> support 
other characters as options as an allowed extension, but applications 
that use extensions are not maximally portable.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>support for multi-byte option characters is only possible when such 
characters can be represented as type <TT
CLASS="LITERAL"
>int</TT
>.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>applications that call any utility with a first operand starting with 
'<SPAN
CLASS="TOKEN"
>-</SPAN
>' should usually specify "<SPAN
CLASS="TOKEN"
>--</SPAN
>" 
to mark the end of the options. Standard utilities that do not support 
this guideline indicate that fact in the OPTIONS section of the utility 
description.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN15443"
></A
><H3
>Extensions</H3
><P
><I
CLASS="EMPHASIS"
>LSB</I
> specifies that:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>if a character is followed by two colons, the option takes an optional 
argument; if there is text in the current <TT
CLASS="PARAMETER"
><I
>argv</I
></TT
> element, 
it is returned in <TT
CLASS="PARAMETER"
><I
>optarg</I
></TT
>, otherwise 
<TT
CLASS="PARAMETER"
><I
>optarg</I
></TT
> is set to <TT
CLASS="LITERAL"
>0</TT
>.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>if <TT
CLASS="PARAMETER"
><I
>optstring</I
></TT
> contains <TT
CLASS="LITERAL"
>W</TT
> followed 
by a semi-colon (<SPAN
CLASS="TOKEN"
>;</SPAN
>),
then <TT
CLASS="LITERAL"
>-W foo</TT
> is treated as the 
long option <TT
CLASS="LITERAL"
>--foo</TT
>. 
<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Note: </B
>See <TT
CLASS="FUNCTION"
>getopt_long()</TT
> for a description
of long options.</P
></BLOCKQUOTE
></DIV
></P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>The first character of <TT
CLASS="PARAMETER"
><I
>optstring</I
></TT
> shall modify 
the behavior of <TT
CLASS="FUNCTION"
>getopt()</TT
> as follows:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>if the first character is '+', then 
<CODE
CLASS="CONSTANT"
>REQUIRE_ORDER</CODE
> processing shall be in
effect (see above)</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>if the first character is '-', then 
<CODE
CLASS="CONSTANT"
>RETURN_IN_ORDER</CODE
> processing shall be in
effect (see above)</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>if the first character is ':', then 
<TT
CLASS="FUNCTION"
>getopt()</TT
> shall return ':' instead of '?'
to indicate a missing option argument, and shall not print any
diagnostic message to <CODE
CLASS="VARNAME"
>stderr</CODE
>.</P
></LI
></UL
></P
></LI
></UL
></P
><P
><I
CLASS="EMPHASIS"
>POSIX</I
> specifies that:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>the <CODE
CLASS="OPTION"
>-W</CODE
> option is reserved for implementation extensions.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN15485"
></A
><H3
>Return Values</H3
><P
><I
CLASS="EMPHASIS"
>LSB</I
> specifies the following additional
<TT
CLASS="FUNCTION"
>getopt()</TT
> return values:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
><SPAN
CLASS="RETURNVALUE"
>'\001'</SPAN
> is returned
if <CODE
CLASS="CONSTANT"
>RETURN_IN_ORDER</CODE
> argument ordering is in effect,
and the next argument is an operand, not an option. The argument is
available in <CODE
CLASS="VARNAME"
>optarg</CODE
>.</P
></LI
></UL
>
Any other return value has the same meaning as for
<I
CLASS="EMPHASIS"
>POSIX</I
>.</P
><P
><I
CLASS="EMPHASIS"
>POSIX</I
> specifies the following 
<TT
CLASS="FUNCTION"
>getopt()</TT
> return values:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>the next option character is returned, if found successfully.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>'<SPAN
CLASS="RETURNVALUE"
>:</SPAN
>' is returned if a parameter is missing for 
one of the options and the first character of <CODE
CLASS="VARNAME"
>optstring</CODE
> is 
'<SPAN
CLASS="TOKEN"
>:</SPAN
>'.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>'<SPAN
CLASS="RETURNVALUE"
>?</SPAN
>' is returned if an unknown option 
character not in <CODE
CLASS="VARNAME"
>optstring</CODE
> is encountered, or if 
<TT
CLASS="FUNCTION"
>getopt()</TT
> detects a missing argument and the first 
character of <CODE
CLASS="VARNAME"
>optstring</CODE
> is not '<SPAN
CLASS="TOKEN"
>:</SPAN
>'.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
><SPAN
CLASS="RETURNVALUE"
>-1</SPAN
> is returned for the end of the option list.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN15518"
></A
><H3
>Environment Variables</H3
><P
><I
CLASS="EMPHASIS"
>LSB</I
> specifies that:
<P
></P
><UL
><LI
STYLE="list-style-type: BULLET"
><P
>if the variable <CODE
CLASS="VARNAME"
>POSIXLY_CORRECT</CODE
> is set, option 
processing stops as soon as a non-option argument is encountered.</P
></LI
><LI
STYLE="list-style-type: BULLET"
><P
>the variable <CODE
CLASS="VARNAME"
>_<TT
CLASS="REPLACEABLE"
><I
>[PID]</I
></TT
>_GNU_nonoption_argv_flags_</CODE
>
(where <TT
CLASS="REPLACEABLE"
><I
>[PID]</I
></TT
> is the process ID for the 
current process), contains a space separated list of arguments that should
not be treated as arguments even though they appear to be so.
<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Rationale: </B
>This was 
used by bash 2.0 to communicate to <I
CLASS="EMPHASIS"
>GNU</I
> libc which 
arguments resulted from wildcard expansion and so should not be 
considered as options. This behavior was removed in bash version 
2.01, but the support remains in <I
CLASS="EMPHASIS"
>GNU</I
> libc.</P
></BLOCKQUOTE
></DIV
>
This behavior is DEPRECATED in this version of the LSB; future revisions
of this specification may not include this requirement.</P
></LI
></UL
></P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="baselib-getloadavg-3.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="baselib-getopt-long-3.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>getloadavg</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libcman.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>getopt_long</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>