<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Comment Conventions for Init Scripts</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Linux Standard Base Core Specification, Generic Part"
HREF="book1.html"><LINK
REL="UP"
TITLE="System Initialization"
HREF="sysinit.html"><LINK
REL="PREVIOUS"
TITLE="Init Script Actions"
HREF="iniscrptact.html"><LINK
REL="NEXT"
TITLE="Installation and Removal of Init Scripts"
HREF="initsrcinstrm.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux Standard Base Core Specification, Generic Part</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="iniscrptact.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 22. System Initialization</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="initsrcinstrm.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INITSCRCOMCONV"
>22.3. Comment Conventions for Init Scripts</A
></H1
><P
>Conforming applications may install one or more init scripts.
These init scripts must be activated by invoking the
<B
CLASS="COMMAND"
>install_initd</B
> command.
Prior to package removal, the changes applied by
<B
CLASS="COMMAND"
>install_initd</B
> must be undone by
invoking <B
CLASS="COMMAND"
>remove_initd</B
>.
See <A
HREF="initsrcinstrm.html"
>Installation and Removal of Init Scripts</A
> for more details.</P
><P
> 
<B
CLASS="COMMAND"
>install_initd</B
> and <B
CLASS="COMMAND"
>remove_initd</B
>
determine actions to take by decoding a specially formatted
block of lines in the script. This block shall be delimited
by the lines 
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>### BEGIN INIT INFO
### END INIT INFO</PRE
></TD
></TR
></TABLE
>
The delimiter lines may contain trailing whitespace, which shall be
ignored.  All lines inside the block shall begin with a hash
character <TT
CLASS="LITERAL"
>'#'</TT
> in the first column, so the shell
interprets them as comment lines which do not affect operation of
the script. The lines shall be of the form:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
># {keyword}: arg1 [arg2...]</PRE
></TD
></TR
></TABLE
>
with exactly one space character between the <TT
CLASS="LITERAL"
>'#'</TT
>
and the keyword, with a single exception.  In lines following a
line containing the <B
CLASS="COMMAND"
>Description</B
> keyword, and until the
next keyword or block ending delimiter is seen,
a line where the <TT
CLASS="LITERAL"
>'#'</TT
>
is followed by more than one space or a tab character
shall be treated as a continuation of the previous line.</P
><P
>The information extracted from the block is used by the
installation tool or the init-script system to assure
that init scripts are run in the correct order.   
It is unspecified whether the information is evaluated
only when <B
CLASS="COMMAND"
>install_initd</B
> runs, when
the init scripts are executed, or both. The information
extracted includes run levels, defined in <A
HREF="runlevels.html"
>Run Levels</A
>,
and boot facilities, defined in <A
HREF="facilname.html"
>Facility Names</A
>.</P
><P
>The following keywords, with their arguments, are defined:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Provides:</B
>  boot_facility_1  [boot_facility_2...]</TT
></DT
><DD
><P
>boot facilities provided by this init script.
When an init script is run with a <B
CLASS="COMMAND"
>start</B
> argument,
the boot facility or facilities specified by the 
<B
CLASS="COMMAND"
>Provides</B
> keyword shall be deemed present
and hence init scripts which require those boot facilities
should be started later.  When an init script is run with a 
<B
CLASS="COMMAND"
>stop</B
> argument, the boot facilities specified by
the <B
CLASS="COMMAND"
>Provides</B
> keyword are deemed  no longer present.  </P
></DD
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Required-Start:</B
>  boot_facility_1  [boot_facility_2...]</TT
></DT
><DD
><P
>facilities which must be available during startup of this service.
The init-script system should insure init scripts which
provide the <B
CLASS="COMMAND"
>Required-Start</B
> facilities
are started before starting this script.</P
></DD
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Required-Stop:</B
>  boot_facility_1  [boot_facility_2...]</TT
></DT
><DD
><P
>facilities which must
be available during the shutdown of this service.  The
init-script system should avoid stopping init scripts which provide
the <B
CLASS="COMMAND"
>Required-Stop</B
>
facilities until this script is stopped.</P
></DD
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Should-Start:</B
>  boot_facility_1  [boot_facility_2...]</TT
></DT
><DD
><P
>facilities which, if present, should
be available during startup of this service. This allows for weak dependencies
which do not cause the service to fail if a facility is not available.
The service may provide reduced functionality in this situation.
Conforming applications should not rely on the existence of this feature.</P
></DD
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Should-Stop:</B
>  boot_facility_1  [boot_facility_2...]</TT
></DT
><DD
><P
>facilities which should be available during shutdown of this service.</P
></DD
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Default-Start:</B
>  run_level_1  [run_level_2...]</TT
>, <TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Default-Stop:</B
>  run_level_1  [run_level_2...]</TT
></DT
><DD
><P
>which run levels should by default run the init script with a 
<B
CLASS="COMMAND"
>start</B
> (<B
CLASS="COMMAND"
>stop</B
>) argument
to start (stop) the services controlled by the init script.
<DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN61690"
></A
><P
>For example, if a service should run in runlevels 3, 4, and 5 only,
specify "Default-Start: 3 4 5" and "Default-Stop: 0 1 2 6".</P
><P
></P
></DIV
></P
></DD
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Short-Description:</B
>  short_description </TT
></DT
><DD
><P
>provide a brief description of the actions of the init script.
Limited to a single line of text.</P
></DD
><DT
><TT
CLASS="CMDSYNOPSIS"
><B
CLASS="COMMAND"
>Description:</B
>  multiline_description </TT
></DT
><DD
><P
>provide a more complete description of the actions of the init script.
May span mulitple lines.  In a multiline description,
each continuation line shall begin with a '#' followed by tab character
or a '#' followed by at least two space characters.  The multiline
description is terminated by the first line that does not match this
criteria.</P
></DD
></DL
></DIV
><P
>Additional keywords may be defined in future versions of
this specification. Also, implementations 
may define local extensions by using the prefix
<B
CLASS="COMMAND"
>X-<TT
CLASS="REPLACEABLE"
><I
>implementor</I
></TT
></B
>.
For example, <B
CLASS="COMMAND"
>X-RedHat-foobardecl</B
>, or 
<B
CLASS="COMMAND"
>X-Debian-xyzzydecl</B
>.  </P
><P
>Example:
<DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><A
NAME="AEN61712"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>	### BEGIN INIT INFO
	# Provides: lsb-ourdb
	# Required-Start: $local_fs $network $remote_fs
	# Required-Stop: $local_fs $network $remote_fs
	# Default-Start:  2 3 4 5
	# Default-Stop: 0 1 6
	# Short-Description: start and stop OurDB
	# Description: OurDB is a very fast and reliable database
	#	 engine used for illustrating init scripts
	### END INIT INFO</PRE
></TD
></TR
></TABLE
><P
></P
></DIV
></P
><P
>The comment conventions described in this section are only required for
init scripts installed by conforming applications. Conforming
runtime implementations are not required to use this scheme in their system
provided init scripts.</P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Note: </B
>This specification does not require, but is designed to allow, the
development of a system which runs init scripts in parallel.  Hence,
enforced-serialization of scripts is avoided unless it is explicitly
necessary. </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="iniscrptact.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="initsrcinstrm.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Init Script Actions</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sysinit.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Installation and Removal of Init Scripts</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>