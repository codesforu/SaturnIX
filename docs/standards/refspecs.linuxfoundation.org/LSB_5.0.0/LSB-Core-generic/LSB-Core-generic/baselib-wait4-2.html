<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>wait4</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Linux Standard Base Core Specification, Generic Part"
HREF="book1.html"><LINK
REL="UP"
TITLE="Interface Definitions for libc"
HREF="libcman.html"><LINK
REL="PREVIOUS"
TITLE="vwscanf"
HREF="baselib-vwscanf.html"><LINK
REL="NEXT"
TITLE="warn"
HREF="baselib-warn-3.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux Standard Base Core Specification, Generic Part</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="baselib-vwscanf.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="baselib-warn-3.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="BASELIB-WAIT4-2"
></A
>wait4</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN21068"
></A
><H2
>Name</H2
>wait4&nbsp;--&nbsp;wait for process termination, BSD style</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN21071"
></A
><H2
>Synopsis</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN21074"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>#include &#60;sys/types.h&#62;
#include &#60;sys/resource.h&#62;
#include &#60;sys/wait.h&#62;</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>pid_t 
  <TT
CLASS="FUNCTION"
>wait4</TT
></CODE
>(pid_t 
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>pid</I
></TT
></I
></TT
>, int *
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>status</I
></TT
></I
></TT
>, int 
  <TT
CLASS="PARAMETER"
><I
><TT
CLASS="REPLACEABLE"
><I
>options</I
></TT
></I
></TT
>, struct rusage *
  <TT
CLASS="PARAMETER"
><I
>rusage</I
></TT
>);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN21090"
></A
><H2
>Description</H2
><P
><TT
CLASS="FUNCTION"
>wait4()</TT
> suspends execution of the current process 
until a child (as specified by <TT
CLASS="PARAMETER"
><I
>pid</I
></TT
>) has exited, 
or until a signal is delivered whose action is to terminate the 
current process or to call a signal handling function. If a child (as 
requested by <TT
CLASS="PARAMETER"
><I
>pid</I
></TT
>) has already exited by the 
time of the call (a so-called "zombie" process), the function returns 
immediately. Any system resources used by the child are freed.</P
><P
>The value of <TT
CLASS="PARAMETER"
><I
>pid</I
></TT
> can be one of:</P
><P
></P
><TABLE
CLASS="VARIABLELIST"
BORDER="0"
CELLSPACING="1"
CELLPADDING="1"
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21101"
></A
><SPAN
STYLE="white-space: nowrap"
>&#60; -1</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>wait for any child process whose process group ID is equal to the 
absolute value of <TT
CLASS="PARAMETER"
><I
>pid</I
></TT
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21106"
></A
><SPAN
STYLE="white-space: nowrap"
>-1</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>wait for any child process; this is equivalent to calling 
<TT
CLASS="FUNCTION"
>wait3()</TT
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21111"
></A
><SPAN
STYLE="white-space: nowrap"
>0</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>wait for any child process whose process group ID is equal to that of 
the calling process.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21115"
></A
><SPAN
STYLE="white-space: nowrap"
>&#62; 0</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>wait for the child whose process ID is equal to the value of 
<TT
CLASS="PARAMETER"
><I
>pid</I
></TT
>.</P
></TD
></TR
></TBODY
></TABLE
><P
>The value of options is a bitwise or of zero or more of the following 
constants:</P
><P
></P
><TABLE
CLASS="VARIABLELIST"
BORDER="0"
CELLSPACING="1"
CELLPADDING="1"
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21122"
></A
><SPAN
STYLE="white-space: nowrap"
>WNOHANG</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>return immediately if no child is there to be waited for.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21126"
></A
><SPAN
STYLE="white-space: nowrap"
>WUNTRACED</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>return for children that are stopped, and whose status has not been 
reported.</P
></TD
></TR
></TBODY
></TABLE
><P
>If status is not <SPAN
CLASS="TOKEN"
>NULL</SPAN
>, <TT
CLASS="FUNCTION"
>wait4()</TT
> 
stores status information in the location 
<TT
CLASS="PARAMETER"
><I
>status</I
></TT
>. This status can be evaluated with the 
following macros:
<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
STYLE="color: #006600; background-color: #FFFFCC;"
><B
>Note: </B
>These macros take the <CODE
CLASS="VARNAME"
>status</CODE
> value (an 
<TT
CLASS="LITERAL"
>int</TT
>) as an argument -- not a pointer to the 
value!</P
></BLOCKQUOTE
></DIV
></P
><P
></P
><TABLE
CLASS="VARIABLELIST"
BORDER="0"
CELLSPACING="1"
CELLPADDING="1"
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21139"
></A
><SPAN
STYLE="white-space: nowrap"
>WIFEXITED(status)</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>is nonzero if the child exited normally.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21143"
></A
><SPAN
STYLE="white-space: nowrap"
>WEXITSTATUS(status)</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>evaluates to the least significant eight bits of the return code of 
the child that terminated, which may have been set as the argument to 
a call to <TT
CLASS="FUNCTION"
>exit()</TT
> or as the argument for a return 
statement in the main program. This macro can only be evaluated if 
<TT
CLASS="FUNCTION"
>WIFEXITED()</TT
> returned nonzero.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21149"
></A
><SPAN
STYLE="white-space: nowrap"
>WIFSIGNALED(status)</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>returns true if the child process exited because of a signal that was 
not caught.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21153"
></A
><SPAN
STYLE="white-space: nowrap"
>WTERMSIG(status)</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>returns the number of the signal that caused the child process to 
terminate. This macro can only be evaluated if 
<TT
CLASS="FUNCTION"
>WIFSIGNALED()</TT
> returned nonzero.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21158"
></A
><SPAN
STYLE="white-space: nowrap"
>WIFSTOPPED(status)</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>returns true if the child process that caused the return is currently 
stopped; this is only possible if the call was done using 
<TT
CLASS="FUNCTION"
>WUNTRACED()</TT
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21163"
></A
><SPAN
STYLE="white-space: nowrap"
>WSTOPSIG(status)</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>returns the number of the signal that caused the child to stop. This 
macro can only be evaluated if <TT
CLASS="FUNCTION"
>WIFSTOPPED()</TT
> 
returned nonzero.</P
></TD
></TR
></TBODY
></TABLE
><P
>If <TT
CLASS="PARAMETER"
><I
>rusage</I
></TT
> is not <SPAN
CLASS="TOKEN"
>NULL</SPAN
>, the 
struct <TT
CLASS="STRUCTNAME"
>rusage</TT
> (as defined in 
<TT
CLASS="FILENAME"
>sys/resource.h</TT
>) that it points to will be filled 
with accounting information. See <TT
CLASS="FUNCTION"
>getrusage()</TT
> 
for details.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN21174"
></A
><H2
>Return Value</H2
><P
>On success, the process ID of the child that exited is returned. On 
error, <SPAN
CLASS="RETURNVALUE"
>-1</SPAN
> is returned (in particular, when 
no unwaited-for child processes of the specified kind exist), or 
<SPAN
CLASS="RETURNVALUE"
>0</SPAN
> if <TT
CLASS="FUNCTION"
>WNOHANG()</TT
> was used 
and no child was available yet. In the latter two cases, the global 
variable <CODE
CLASS="VARNAME"
>errno</CODE
> is set appropriately.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN21181"
></A
><H2
>Errors</H2
><P
></P
><TABLE
CLASS="VARIABLELIST"
BORDER="0"
CELLSPACING="1"
CELLPADDING="1"
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21184"
></A
><SPAN
STYLE="white-space: nowrap"
>ECHILD</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>No unwaited-for child process as specified does exist.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><A
NAME="AEN21188"
></A
><SPAN
STYLE="white-space: nowrap"
>ERESTARTSYS</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>A <TT
CLASS="FUNCTION"
>WNOHANG()</TT
> was not set and an unblocked signal or
a <CODE
CLASS="VARNAME"
>SIGCHILD</CODE
> was caught. This error is returned by 
the system call. The library interface is not allowed to return 
<SPAN
CLASS="ERRORNAME"
>ERESTARTSYS</SPAN
>, but will return
<SPAN
CLASS="ERRORNAME"
>EINTR</SPAN
>.</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="baselib-vwscanf.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="baselib-warn-3.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>vwscanf</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libcman.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>warn</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>